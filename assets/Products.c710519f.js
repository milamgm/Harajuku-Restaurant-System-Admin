import{r as c,c as q,A as St,u as $t,a as _,b as ue,j as d,d as I,e,C as _t,f as Re,F as ne,g as Rt,p as V,h as K,i as Q,k as Ae,l as At,m as Bt,n as Lt,o as Tt,q as $e,M as Mt,B as Dt,s as Et,t as Ht,v as Ot,w as Gt,G as j,x as X,I as W,y as U,z as E,E as Pt,D as Ut,H as Be,R as me,J as Le,K as Te}from"./index.fd8f1dd6.js";import{g as Me,r as De,u as jt,n as ee,O as te,E as M,T as zt,l as Vt}from"./index.3148512b.js";function Wt(){return c.exports.useState(null)}const Ee=Re("h4");Ee.displayName="DivStyledAsH4";const qt=q("alert-heading",{Component:Ee}),Kt=q("alert-link",{Component:St}),Xt={variant:"primary",show:!0,transition:ne,closeLabel:"Close alert"},he=c.exports.forwardRef((t,r)=>{const{bsPrefix:o,show:a,closeLabel:n,closeVariant:l,className:u,children:h,variant:p,onClose:s,dismissible:i,transition:f,...v}=$t(t,{show:"onClose"}),y=_(o,"alert"),C=ue(R=>{s&&s(!1,R)}),k=f===!0?ne:f,w=d("div",{role:"alert",...k?void 0:v,ref:r,className:I(u,y,p&&`${y}-${p}`,i&&`${y}-dismissible`),children:[i&&e(_t,{onClick:C,"aria-label":n,variant:l}),h]});return k?e(k,{unmountOnExit:!0,...v,ref:void 0,in:a,children:w}):a?w:null});he.displayName="Alert";he.defaultProps=Xt;const He=Object.assign(he,{Link:Kt,Heading:qt}),Yt={variant:"primary",active:!1,disabled:!1},fe=c.exports.forwardRef(({as:t,bsPrefix:r,variant:o,size:a,active:n,className:l,...u},h)=>{const p=_(r,"btn"),[s,{tagName:i}]=Rt({tagName:t,...u});return e(i,{...s,...u,ref:h,className:I(l,p,n&&"active",o&&`${p}-${o}`,a&&`${p}-${a}`,u.href&&u.disabled&&"disabled")})});fe.displayName="Button";fe.defaultProps=Yt;const x=fe;function Jt(t,r){return c.exports.Children.toArray(t).some(o=>c.exports.isValidElement(o)&&o.type===r)}const Zt={type:V.exports.string,tooltip:V.exports.bool,as:V.exports.elementType},ge=c.exports.forwardRef(({as:t="div",className:r,type:o="valid",tooltip:a=!1,...n},l)=>e(t,{...n,ref:l,className:I(r,`${o}-${a?"tooltip":"feedback"}`)}));ge.displayName="Feedback";ge.propTypes=Zt;const Oe=ge,Qt=c.exports.createContext({}),H=Qt,Ge=c.exports.forwardRef(({id:t,bsPrefix:r,className:o,type:a="checkbox",isValid:n=!1,isInvalid:l=!1,as:u="input",...h},p)=>{const{controlId:s}=c.exports.useContext(H);return r=_(r,"form-check-input"),e(u,{...h,ref:p,type:a,id:t||s,className:I(o,r,n&&"is-valid",l&&"is-invalid")})});Ge.displayName="FormCheckInput";const Pe=Ge,Ue=c.exports.forwardRef(({bsPrefix:t,className:r,htmlFor:o,...a},n)=>{const{controlId:l}=c.exports.useContext(H);return t=_(t,"form-check-label"),e("label",{...a,ref:n,htmlFor:o||l,className:I(r,t)})});Ue.displayName="FormCheckLabel";const pe=Ue,je=c.exports.forwardRef(({id:t,bsPrefix:r,bsSwitchPrefix:o,inline:a=!1,reverse:n=!1,disabled:l=!1,isValid:u=!1,isInvalid:h=!1,feedbackTooltip:p=!1,feedback:s,feedbackType:i,className:f,style:v,title:y="",type:C="checkbox",label:k,children:w,as:R="input",...G},L)=>{r=_(r,"form-check"),o=_(o,"form-switch");const{controlId:A}=c.exports.useContext(H),O=c.exports.useMemo(()=>({controlId:t||A}),[A,t]),B=!w&&k!=null&&k!==!1||Jt(w,pe),D=e(Pe,{...G,type:C==="switch"?"checkbox":C,ref:L,isValid:u,isInvalid:h,disabled:l,as:R});return e(H.Provider,{value:O,children:e("div",{style:v,className:I(f,B&&r,a&&`${r}-inline`,n&&`${r}-reverse`,C==="switch"&&o),children:w||d(K,{children:[D,B&&e(pe,{title:y,children:k}),s&&e(Oe,{type:i,tooltip:p,children:s})]})})})});je.displayName="FormCheck";const ae=Object.assign(je,{Input:Pe,Label:pe}),ze=c.exports.forwardRef(({bsPrefix:t,type:r,size:o,htmlSize:a,id:n,className:l,isValid:u=!1,isInvalid:h=!1,plaintext:p,readOnly:s,as:i="input",...f},v)=>{const{controlId:y}=c.exports.useContext(H);t=_(t,"form-control");let C;return p?C={[`${t}-plaintext`]:!0}:C={[t]:!0,[`${t}-${o}`]:o},e(i,{...f,type:r,size:a,ref:v,readOnly:s,id:n||y,className:I(l,C,u&&"is-valid",h&&"is-invalid",r==="color"&&`${t}-color`)})});ze.displayName="FormControl";const er=Object.assign(ze,{Feedback:Oe}),tr=q("form-floating"),Ve=c.exports.forwardRef(({controlId:t,as:r="div",...o},a)=>{const n=c.exports.useMemo(()=>({controlId:t}),[t]);return e(H.Provider,{value:n,children:e(r,{...o,ref:a})})});Ve.displayName="FormGroup";const We=Ve,rr={column:!1,visuallyHidden:!1},ye=c.exports.forwardRef(({as:t="label",bsPrefix:r,column:o,visuallyHidden:a,className:n,htmlFor:l,...u},h)=>{const{controlId:p}=c.exports.useContext(H);r=_(r,"form-label");let s="col-form-label";typeof o=="string"&&(s=`${s} ${s}-${o}`);const i=I(n,r,a&&"visually-hidden",o&&s);return l=l||p,o?e(Q,{ref:h,as:"label",className:i,htmlFor:l,...u}):e(t,{ref:h,className:i,htmlFor:l,...u})});ye.displayName="FormLabel";ye.defaultProps=rr;const or=ye,qe=c.exports.forwardRef(({bsPrefix:t,className:r,id:o,...a},n)=>{const{controlId:l}=c.exports.useContext(H);return t=_(t,"form-range"),e("input",{...a,type:"range",ref:n,className:I(r,t),id:o||l})});qe.displayName="FormRange";const ar=qe,Ke=c.exports.forwardRef(({bsPrefix:t,size:r,htmlSize:o,className:a,isValid:n=!1,isInvalid:l=!1,id:u,...h},p)=>{const{controlId:s}=c.exports.useContext(H);return t=_(t,"form-select"),e("select",{...h,size:o,ref:p,className:I(a,t,r&&`${t}-${r}`,n&&"is-valid",l&&"is-invalid"),id:u||s})});Ke.displayName="FormSelect";const nr=Ke,Xe=c.exports.forwardRef(({bsPrefix:t,className:r,as:o="small",muted:a,...n},l)=>(t=_(t,"form-text"),e(o,{...n,ref:l,className:I(r,t,a&&"text-muted")})));Xe.displayName="FormText";const sr=Xe,Ye=c.exports.forwardRef((t,r)=>e(ae,{...t,ref:r,type:"switch"}));Ye.displayName="Switch";const cr=Object.assign(Ye,{Input:ae.Input,Label:ae.Label}),Je=c.exports.forwardRef(({bsPrefix:t,className:r,children:o,controlId:a,label:n,...l},u)=>(t=_(t,"form-floating"),d(We,{ref:u,className:I(r,t),controlId:a,...l,children:[o,e("label",{htmlFor:a,children:n})]})));Je.displayName="FloatingLabel";const lr=Je,ir={_ref:V.exports.any,validated:V.exports.bool,as:V.exports.elementType},ve=c.exports.forwardRef(({className:t,validated:r,as:o="form",...a},n)=>e(o,{...a,ref:n,className:I(t,r&&"was-validated")}));ve.displayName="Form";ve.propTypes=ir;const m=Object.assign(ve,{Group:We,Control:er,Floating:tr,Check:ae,Switch:cr,Label:or,Text:sr,Range:ar,Select:nr,FloatingLabel:lr});var re;function _e(t){if((!re&&re!==0||t)&&Ae){var r=document.createElement("div");r.style.position="absolute",r.style.top="-9999px",r.style.width="50px",r.style.height="50px",r.style.overflow="scroll",document.body.appendChild(r),re=r.offsetWidth-r.clientWidth,document.body.removeChild(r)}return re}const dr=q("modal-body"),Ze=c.exports.forwardRef(({bsPrefix:t,className:r,contentClassName:o,centered:a,size:n,fullscreen:l,children:u,scrollable:h,...p},s)=>{t=_(t,"modal");const i=`${t}-dialog`,f=typeof l=="string"?`${t}-fullscreen-${l}`:`${t}-fullscreen`;return e("div",{...p,ref:s,className:I(i,r,n&&`${t}-${n}`,a&&`${i}-centered`,h&&`${i}-scrollable`,l&&f),children:e("div",{className:I(`${t}-content`,o),children:u})})});Ze.displayName="ModalDialog";const Qe=Ze,ur=q("modal-footer"),pr={closeLabel:"Close",closeButton:!1},Ce=c.exports.forwardRef(({bsPrefix:t,className:r,...o},a)=>(t=_(t,"modal-header"),e(At,{ref:a,...o,className:I(r,t)})));Ce.displayName="ModalHeader";Ce.defaultProps=pr;const mr=Ce,hr=Re("h4"),fr=q("modal-title",{Component:hr}),gr={show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,restoreFocus:!0,animation:!0,dialogAs:Qe};function yr(t){return e(ne,{...t,timeout:null})}function vr(t){return e(ne,{...t,timeout:null})}const be=c.exports.forwardRef(({bsPrefix:t,className:r,style:o,dialogClassName:a,contentClassName:n,children:l,dialogAs:u,"aria-labelledby":h,"aria-describedby":p,"aria-label":s,show:i,animation:f,backdrop:v,keyboard:y,onEscapeKeyDown:C,onShow:k,onHide:w,container:R,autoFocus:G,enforceFocus:L,restoreFocus:A,restoreFocusOptions:O,onEntered:B,onExit:D,onExiting:Y,onEnter:S,onEntering:N,onExited:F,backdropClassName:T,manager:P,...se},lt)=>{const[it,dt]=c.exports.useState({}),[ut,Ne]=c.exports.useState(!1),ce=c.exports.useRef(!1),le=c.exports.useRef(!1),J=c.exports.useRef(null),[Z,pt]=Wt(),mt=Bt(lt,pt),xe=ue(w),ht=Lt();t=_(t,"modal");const ft=c.exports.useMemo(()=>({onHide:xe}),[xe]);function ke(){return P||Et({isRTL:ht})}function we(g){if(!Ae)return;const z=ke().getScrollbarWidth()>0,Se=g.scrollHeight>Ot(g).documentElement.clientHeight;dt({paddingRight:z&&!Se?_e():void 0,paddingLeft:!z&&Se?_e():void 0})}const ie=ue(()=>{Z&&we(Z.dialog)});Tt(()=>{$e(window,"resize",ie),J.current==null||J.current()});const gt=()=>{ce.current=!0},yt=g=>{ce.current&&Z&&g.target===Z.dialog&&(le.current=!0),ce.current=!1},Fe=()=>{Ne(!0),J.current=Gt(Z.dialog,()=>{Ne(!1)})},vt=g=>{g.target===g.currentTarget&&Fe()},Ct=g=>{if(v==="static"){vt(g);return}if(le.current||g.target!==g.currentTarget){le.current=!1;return}w==null||w()},bt=g=>{!y&&v==="static"?(g.preventDefault(),Fe()):y&&C&&C(g)},Nt=(g,z)=>{g&&we(g),S==null||S(g,z)},xt=g=>{J.current==null||J.current(),D==null||D(g)},kt=(g,z)=>{N==null||N(g,z),Ht(window,"resize",ie)},wt=g=>{g&&(g.style.display=""),F==null||F(g),$e(window,"resize",ie)},Ft=c.exports.useCallback(g=>e("div",{...g,className:I(`${t}-backdrop`,T,!f&&"show")}),[f,T,t]),Ie={...o,...it};Ie.display="block";const It=g=>e("div",{role:"dialog",...g,style:Ie,className:I(r,t,ut&&`${t}-static`),onClick:v?Ct:void 0,onMouseUp:yt,"aria-label":s,"aria-labelledby":h,"aria-describedby":p,children:e(u,{...se,onMouseDown:gt,className:a,contentClassName:n,children:l})});return e(Mt.Provider,{value:ft,children:e(Dt,{show:i,ref:mt,backdrop:v,container:R,keyboard:!0,autoFocus:G,enforceFocus:L,restoreFocus:A,restoreFocusOptions:O,onEscapeKeyDown:bt,onShow:k,onHide:w,onEnter:Nt,onEntering:kt,onEntered:B,onExit:xt,onExiting:Y,onExited:wt,manager:ke(),transition:f?yr:void 0,backdropTransition:f?vr:void 0,renderBackdrop:Ft,renderDialog:It})})});be.displayName="Modal";be.defaultProps=gr;const b=Object.assign(be,{Body:dr,Header:mr,Title:fr,Footer:ur,Dialog:Qe,TRANSITION_DURATION:300,BACKDROP_TRANSITION_DURATION:150});function et(t){return j({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 19c.946 0 1.81-.103 2.598-.281l-1.757-1.757c-.273.021-.55.038-.841.038-5.351 0-7.424-3.846-7.926-5a8.642 8.642 0 0 1 1.508-2.297L4.184 8.305c-1.538 1.667-2.121 3.346-2.132 3.379a.994.994 0 0 0 0 .633C2.073 12.383 4.367 19 12 19zm0-14c-1.837 0-3.346.396-4.604.981L3.707 2.293 2.293 3.707l18 18 1.414-1.414-3.319-3.319c2.614-1.951 3.547-4.615 3.561-4.657a.994.994 0 0 0 0-.633C21.927 11.617 19.633 5 12 5zm4.972 10.558-2.28-2.28c.19-.39.308-.819.308-1.278 0-1.641-1.359-3-3-3-.459 0-.888.118-1.277.309L8.915 7.501A9.26 9.26 0 0 1 12 7c5.351 0 7.424 3.846 7.926 5-.302.692-1.166 2.342-2.954 3.558z"}}]})(t)}function Cr(t){return j({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"circle",attr:{cx:"7.499",cy:"9.5",r:"1.5"}},{tag:"path",attr:{d:"m10.499 14-1.5-2-3 4h12l-4.5-6z"}},{tag:"path",attr:{d:"M19.999 4h-16c-1.103 0-2 .897-2 2v12c0 1.103.897 2 2 2h16c1.103 0 2-.897 2-2V6c0-1.103-.897-2-2-2zm-16 14V6h16l.002 12H3.999z"}}]})(t)}function br(t){return j({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m12 18 4-5h-3V2h-2v11H8z"}},{tag:"path",attr:{d:"M19 9h-4v2h4v9H5v-9h4V9H5c-1.103 0-2 .897-2 2v9c0 1.103.897 2 2 2h14c1.103 0 2-.897 2-2v-9c0-1.103-.897-2-2-2z"}}]})(t)}function tt(t){return j({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M19 11h-6V5h-2v6H5v2h6v6h2v-6h6z"}}]})(t)}const rt=(t,r)=>{const o=Me();if(t.img.files[0]!==void 0){const a=t.img.files[0],n=a.name+Or(),l=De(o,`products/${n}`);jt(l,a)}},ot=(t,r)=>{const o=t.target.files&&t.target.files[0],a=o?URL.createObjectURL(o):"";r(a)},Nr=({addProductBtn:t,setAddProductBtn:r})=>{const{addCategoryField:o,setAddCategoryField:a}=X(),[n,l]=c.exports.useState(""),[u,h]=c.exports.useState(""),[p,s]=c.exports.useState(!1);let i="";const f=y=>{y.preventDefault();const C=y.target.value.replace(/\D/g,""),k=C.slice(-2),w=C.slice(0,-2),R=w+(w!==""?".":"")+k;l(R)},v=y=>{y.preventDefault();const C=y.target;rt(C);try{xr(C,i,u,n),r(!1)}catch(k){console.error(k),ee.error("Failed to connect to database, please try again")}};return d(K,{children:[d(b,{show:t,fullscreen:!0,onHide:()=>r(!1),children:[e(b.Header,{closeButton:!0,children:e(b.Title,{children:"Add Product"})}),e(b.Body,{children:e("div",{className:"modal-in",children:d(m,{onSubmit:v,children:[d(m.Group,{className:"mb-3 input-group-sm",controlId:"productId",children:[e(m.Label,{children:"Product ID#"}),e(m.Control,{type:"number",name:"id",placeholder:"5463",required:!0})]}),d(m.Group,{className:"mb-3 input-group-sm",controlId:"productImg",children:[e(m.Label,{children:"Image"}),d("div",{children:[u!==""&&e(x,{variant:"link",className:"text-decoration-none",onClick:()=>s(!0),children:e("div",{className:"img-form-div",children:e("img",{className:"img-form",src:u,width:"125"})})}),e(x,{variant:"link",className:"text-decoration-none",onClick:()=>s(!0),children:d("div",{className:"d-flex align-items-center",children:[e("h3",{className:"me-3",children:e(ct,{})}),"Choose from gallery"]})}),e(m.Control,{name:"img",type:"file",className:"mt-3",onChange:y=>ot(y,h)})]})]}),d(m.Group,{className:"mb-3",controlId:"productId",children:[e(m.Label,{children:"Name"}),e(m.Control,{type:"text",name:"name",required:!0,placeholder:"Delicious Dessert"})]}),d(m.Group,{className:"mb-3",controlId:"productId",children:[e(m.Label,{children:"Price"}),e(m.Control,{type:"text",name:"price",placeholder:"5.00",required:!0,value:n,onChange:f})]}),d(m.Group,{className:"mb-3",controlId:"productId",children:[e(m.Label,{children:"Description"}),e(m.Control,{as:"textarea",name:"description",required:!0,placeholder:"With the best ingredients..."})]}),d(m.Group,{className:"mb-3",controlId:"productCategory",children:[e(m.Label,{children:"Category"})," ",e(x,{variant:"link",className:"text-decoration-none",onClick:()=>a(!o),children:"+ Add new category"}),o&&e(at,{}),e(nt,{})]}),e(x,{className:"mt-3 btn-primary",type:"submit",children:"Submit"})]})})})]}),p&&e(st,{openGalleryBtn:p,setOpenGalleryBtn:s,setProductImg:h})]})},xr=async(t,r,o,a)=>{await W(U(E,"products",t.id.value),{product_id:t.id.value,product_img:r!==""?r:o,product_name:t.name.value,product_price:Number(a),product_description:t.description.value,product_category:t.category.value,product_isAvailable:!0})},kr=({editProductBtn:t,setEditProductBtn:r,editProduct:o})=>{const{addCategoryField:a,setAddCategoryField:n}=X(),{product_id:l,product_name:u,product_price:h,product_img:p,product_description:s,product_category:i}=o,[f,v]=c.exports.useState(u),[y,C]=c.exports.useState(h),[k,w]=c.exports.useState(s),[R,G]=c.exports.useState(i),[L,A]=c.exports.useState(p),[O,B]=c.exports.useState(!1);let D="";const Y=N=>{N.preventDefault();const F=N.target.value.replace(/\D/g,""),T=F.slice(-2),P=F.slice(0,-2),se=Number(P+(P!==""?".":"")+T);C(se)},S=N=>{N.preventDefault();const F=N.target;rt(F);try{wr(F,D,L,f,R,y),r(!1)}catch(T){console.error(T),ee.error("Failed to connect to database, please try again")}};return d(K,{children:[d(b,{show:t,fullscreen:!0,onHide:()=>r(!1),children:[e(b.Header,{closeButton:!0,children:e(b.Title,{children:"Edit Product"})}),e(b.Body,{children:e("div",{className:"modal-in",children:d(m,{onSubmit:S,children:[d(m.Group,{className:"mb-3 input-group-sm",controlId:"productId",children:[e(m.Label,{children:"Product ID#"}),e(m.Control,{disabled:!0,type:"number",name:"id",value:l})]}),d(m.Group,{className:"mb-3 input-group-sm",controlId:"productImg",children:[e(m.Label,{children:"Image"}),d("div",{children:[e(x,{className:"m-3 text-decoration-none",variant:"link",onClick:()=>B(!0),children:e("div",{className:"img-form-div",children:e("img",{className:"img-form",src:L,width:"125"})})}),e(x,{variant:"link",className:"text-decoration-none",onClick:()=>B(!0),children:d("div",{className:"d-flex align-items-center",children:[e("h3",{className:"me-3",children:e(ct,{})}),"Choose from gallery"]})}),e(m.Control,{name:"img",type:"file",accept:".jpg, .jpeg, .png",onChange:N=>ot(N,A)})]})]}),d(m.Group,{className:"mb-3",controlId:"productName",children:[e(m.Label,{children:"Name"}),e(m.Control,{type:"text",name:"name",onChange:N=>v(N.target.value),value:f})]}),d(m.Group,{className:"mb-3",controlId:"productPrice",children:[e(m.Label,{children:"Price"}),e(m.Control,{type:"text",name:"price",value:y,onChange:Y})]}),d(m.Group,{className:"mb-3",controlId:"productDescription",children:[e(m.Label,{children:"Description"}),e(m.Control,{as:"textarea",name:"description",onChange:N=>w(N.target.value),value:k})]}),d(m.Group,{className:"mb-3",controlId:"productCategory",children:[e(m.Label,{children:"Category"})," ",e(x,{variant:"link",className:"text-decoration-none",onClick:()=>n(!a),children:"+ Add new category"}),a&&e(at,{}),e(nt,{setProductCategory:G,currentCategory:i})]}),e(x,{className:"mt-3 btn-primary",type:"submit",children:"Submit"})]})})})]}),O&&e(st,{openGalleryBtn:O,setOpenGalleryBtn:B,setProductImg:A}),e(te,{position:"top-center",reverseOrder:!1})]})},wr=async(t,r,o,a,n,l)=>{await W(U(E,"products",t.id.value),{product_id:t.id.value,product_img:r!==""?r:o,product_name:a,product_price:l,product_description:o,product_category:n,product_isAvailable:!0})};function Fr(t){return j({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",stroke:"#000",strokeWidth:"2",d:"M12,17 L12,19 M12,10 L12,16 M12,3 L2,22 L22,22 L12,3 Z"}}]})(t)}const Ir=({deleteProductBtn:t,setDeleteProductBtn:r,selectedProducts:o})=>{const{products:a}=X(),[n,l]=c.exports.useState(""),u="Yes, I want to delete the selected items.",h=()=>{const p=s=>{try{(async()=>{await Pt(U(E,"products",s)),M.success("Product(s) successfully deleted!"),r(!1)})()}catch(i){console.error(i),M.error("Failed to connect to database, please try again")}};u===n?o.map(s=>{p(s)}):M.error("Name doesn't match. Please try again")};return d(b,{show:t,onHide:()=>r(p=>!p),keyboard:!1,children:[d("div",{className:"border border-danger",children:[e(b.Header,{closeButton:!0,children:e(b.Title,{children:"Delete Product"})}),e(b.Body,{className:"modal-body",children:d("div",{className:"modal-in",children:[d(He,{variant:"danger",children:[e(Fr,{})," This action will permanently delete this product(s) and all information associated."]}),"To confirm that you want to delete the following products:",e("ul",{children:o.map(p=>{var s;return e("li",{children:e("small",{children:d("b",{children:[(s=a.find(i=>i.product_id===p))==null?void 0:s.product_name," "]})})},p)})}),'please type "',u,'"',e(m.Control,{autoFocus:!0,className:"mt-3",type:"text",placeholder:u,value:n,onChange:p=>l(p.target.value)})]})}),d(b.Footer,{children:[e(x,{className:"btn-secondary",onClick:()=>r(p=>!p),children:"Close"}),e(x,{className:"btn-danger",onClick:h,children:"Delete product"})]})]}),e(te,{position:"top-center",reverseOrder:!1})]})},Sr="/harajuku-restaurant-system-admin/assets/loading.21a3c14a.svg",$r=()=>d("div",{className:"text-center mt-5 pt-5",children:[e("img",{className:"loading_icon",src:Sr,width:"75"}),e("h3",{className:"mt-3",children:"Loading..."})]}),_r=({importProductsBtn:t,setImportProductsBtn:r})=>{const[o,a]=c.exports.useState(),n=s=>{const i=s.target;a(i.files[0])},l=s=>{if(s.preventDefault(),o)if(o.name.slice(-3)==="csv"){const f=new FileReader;f.readAsText(o),console.log(f),f.onload=()=>{p(f.result)},f.onerror=()=>{console.error(f.error),M.error("Error, please try again.")}}else M.error("Fille not allowed. Must be a CSV file.");else M.error("No files selected")},u=s=>{let i;if(s.indexOf(" ")){const f=s.split(" ");let v=[];for(const y of f){const k=`${y.charAt(0).toUpperCase()}${y.slice(1)}`;v.push(k)}i=v.join(" ")}else i=`${s.charAt(0).toUpperCase()}${s.slice(1)}`;return i},h=async s=>{const i=u(s[1]),f=u(s[4]);await W(U(E,"products",s[0]),{product_id:s[0],product_img:s[5],product_name:i,product_price:Number(s[2]),product_description:s[3],product_category:f,product_isAvailable:!0}),await W(U(E,"categories",f),{category_name:f}),M.success("Product(s) successfully imported"),r(!1)},p=(s,i)=>{let f=typeof s=="string"?s.split(/\r?\n|\r/):[""];f=f.filter(v=>v!=="");for(let v=1;v<f.length;v++){const y=f[v].split(";");try{h(y)}catch(C){console.error(C),M.error("Could not connect, please try again")}}};return e(K,{children:d(b,{show:t,fullscreen:!0,onHide:()=>r(!1),children:[e(b.Header,{closeButton:!0,children:e(b.Title,{children:"Import Products"})}),e(b.Body,{className:"modal-body",children:e("div",{className:"modal-in",children:d(m,{onSubmit:l,children:[e("h5",{children:"Import products from a CSV or tab-delimited TXT file."}),d(m.Group,{className:"mb-3 input-group-sm",controlId:"importFile",children:[e(m.Label,{children:"Choose File"}),e(m.Control,{name:"importFile",type:"file",multiple:!1,onChange:s=>n(s)})]}),e(x,{className:"btn-primary",type:"submit",children:"Continue"})]})})}),e(te,{position:"top-center",reverseOrder:!1})]})})},Rr=({showImage:t,setShowImage:r,editProduct:o})=>d(b,{show:t,onHide:()=>r(!1),children:[e(b.Header,{closeButton:!0,children:e(b.Title,{children:o.product_name})}),e(b.Body,{className:"modal-body",children:e("div",{className:"modal-in",children:e("img",{src:o.product_img,className:"show-product-img"})})})]});function Ar(t){return j({tag:"svg",attr:{viewBox:"0 0 16 16"},child:[{tag:"path",attr:{fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}}]})(t)}const Br=({getCheckboxes:t,mainCheckbox:r,setEditProduct:o,setShowImage:a,setEditProductBtn:n,changeAvailability:l,addToRefs:u,setDeleteProductBtn:h,setSelectedProducts:p})=>{const{products:s}=X();return d(zt,{striped:!0,bordered:!0,hover:!0,children:[e("thead",{children:d("tr",{children:[e("th",{children:e(m.Check,{type:"checkbox",onChange:t,"data-check":"mainCheckbox",ref:r})}),e("th",{children:"# ID"}),e("th",{children:"Name"}),e("th",{children:"Category"}),e("th",{children:"Description"}),e("th",{children:"Price"}),e("th",{children:"Image"})]})}),e("tbody",{children:s.map((i,f)=>d("tr",{className:`${i.product_isAvailable===!0?"":"isNotAvailable"}`,children:[e("td",{children:e(m.Check,{"data-check":i.product_id,type:"checkbox",className:"row_checkbox",onChange:t,ref:u})}),e("td",{children:i.product_id}),e("td",{children:i.product_name}),e("td",{children:i.product_category}),e("td",{children:e("small",{children:i.product_description})}),d("td",{className:"text-end",children:[i.product_price,"\u20AC"]}),e("td",{children:e("div",{className:"text-center",onClick:()=>{o(i),i.product_img!==""?a(!0):n(!0)},children:i.product_img!==""?e("h3",{children:e(Cr,{})}):d(He,{variant:"danger",className:"text-center",children:[e(Ar,{}),'"Please add an image"']})})}),e("td",{children:d("div",{className:"btn-list-div",children:[e(x,{className:"text-warning",variant:"link",onClick:()=>l([i.product_id]),children:e("h4",{children:e(et,{})})}),e(x,{className:"text-info",variant:"link",onClick:()=>{n(!0),o(i)},children:e("h4",{children:e(Ut,{})})}),e(x,{className:"text-danger",variant:"link",onClick:()=>{h(!0),p([i.product_id])},children:e("h4",{children:e(Be,{})})})]})})]},i.product_id))})]})},Lr=({setAddProductBtn:t,setImportProductsBtn:r,selectedProducts:o,changeAvailability:a,setDeleteProductBtn:n})=>d(K,{children:[e(me,{children:d(Q,{children:[d(x,{className:"mt-1me-1",variant:"success",onClick:()=>t(!0),children:[e(tt,{})," Add Product"]})," ",d(x,{className:"mt-1me-1",variant:"dark",onClick:()=>r(!0),children:[e(br,{})," Import Products"]})," "]})}),e("div",{className:"mt-5",children:d("div",{className:"d-flex justify-content-end mb-2",children:[d(x,{className:"me-1 btn-warning",onClick:()=>o.length>0?a(o):ee("Please select one or more products."),children:[e(et,{})," Mark / unmark as unavailable"]})," ",d(x,{className:"btn-danger",onClick:()=>o.length>0?n(!0):ee("Please select one or more products."),children:[e(Be,{})," Delete"]})," "]})})]});var oe,Tr=new Uint8Array(16);function Mr(){if(!oe&&(oe=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!oe))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return oe(Tr)}const Dr=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Er(t){return typeof t=="string"&&Dr.test(t)}var $=[];for(var de=0;de<256;++de)$.push((de+256).toString(16).substr(1));function Hr(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,o=($[t[r+0]]+$[t[r+1]]+$[t[r+2]]+$[t[r+3]]+"-"+$[t[r+4]]+$[t[r+5]]+"-"+$[t[r+6]]+$[t[r+7]]+"-"+$[t[r+8]]+$[t[r+9]]+"-"+$[t[r+10]]+$[t[r+11]]+$[t[r+12]]+$[t[r+13]]+$[t[r+14]]+$[t[r+15]]).toLowerCase();if(!Er(o))throw TypeError("Stringified UUID is invalid");return o}function Or(t,r,o){t=t||{};var a=t.random||(t.rng||Mr)();if(a[6]=a[6]&15|64,a[8]=a[8]&63|128,r){o=o||0;for(var n=0;n<16;++n)r[o+n]=a[n];return r}return Hr(a)}const at=()=>{const[t,r]=c.exports.useState(""),o=()=>{const a=Ur(t);try{Gr(a),r(""),M.success("Category successfully added!")}catch(n){console.error(n),M.error("This didn't work. Please refresh the page and try again")}};return d("div",{className:"mb-3",children:[d(me,{children:[e(Q,{children:e(m.Control,{type:"text",size:"sm",className:" me-2",value:t,onChange:a=>r(a.target.value)})}),e(Q,{children:e(x,{className:"btn-primary",onClick:()=>o(),children:"Add"})})]}),e(te,{position:"top-center",reverseOrder:!1})]})},Gr=async t=>{await W(U(E,"categories",t),{category_name:t})},nt=({setProductCategory:t,currentCategory:r})=>{const{initFetchCategories:o,setInitFetchCategories:a,categories:n,setCategories:l}=X();return c.exports.useEffect(()=>{o===!1&&(Le(Te(E,"categories"),u=>{l([]),u.docs.forEach(h=>{l(p=>[...p,h.data()])})}),a(!0))},[]),e(m.Select,{"aria-label":"Categories",name:"category",defaultValue:r,onChange:u=>t!==void 0&&t(u.target.value),children:n.map(u=>e("option",{value:u.category_name,children:u.category_name},u.category_name))})},st=({openGalleryBtn:t,setOpenGalleryBtn:r,setProductImg:o})=>{const a=Me(),n=De(a,"products/"),[l,u]=c.exports.useState([]);return c.exports.useEffect(()=>{Vt(n).then(h=>{h.items.forEach(p=>{u(s=>[...s,p.fullPath])})}).catch(h=>{ee.error("Uh-oh, an error occurred!"),console.error(h)})},[]),e(K,{children:d(b,{show:t,size:"xl",onHide:()=>r(!1),children:[e(b.Header,{closeButton:!0,children:e(b.Title,{children:"Gallery"})}),e(b.Body,{children:e(me,{className:"mt-4",children:l.map(h=>e(Q,{children:e(x,{variant:"link",onClick:()=>{o(`${"https://firebasestorage.googleapis.com/v0/b/harajuku-b44c9.appspot.com/o/products%2F"+h.replace("products/","")}?alt=media`),r(!1)},children:e("img",{src:`https://firebasestorage.googleapis.com/v0/b/harajuku-b44c9.appspot.com/o/products%2F${h.replace("products/","")}?alt=media`,width:"100"})})},h))})})]})})};function ct(t){return j({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"}}]})(t)}const Pr={product_id:"",product_img:"",product_name:"",product_price:0,product_description:"",product_category:"",product_isAvailable:!1},Ur=t=>{let r;if(t.indexOf(" ")){const o=t.split(" ");let a=[];for(const n of o){const u=`${n.charAt(0).toUpperCase()}${n.slice(1)}`;a.push(u)}r=a.join(" ")}else r=`${t.charAt(0).toUpperCase()}${t.slice(1)}`;return r},Vr=()=>{const{setInitFetchProducts:t,initFetchProducts:r,products:o,setProducts:a}=X(),[n,l]=c.exports.useState(!1),[u,h]=c.exports.useState(!1),[p,s]=c.exports.useState(!1),[i,f]=c.exports.useState(!1),[v,y]=c.exports.useState(!1),C=c.exports.useRef(),[k,w]=c.exports.useState([]),[R,G]=c.exports.useState(Pr),L=c.exports.useRef([]);L.current=[];const A=L.current,O=S=>{S&&!A.includes(S)&&A.push(S)},B=S=>{(S==null?void 0:S.target.dataset.check)==="mainCheckbox"&&L.current.map(N=>N.checked=S.target.checked),w(()=>{var N;return(N=A.filter(F=>F.checked===!0))==null?void 0:N.map(F=>F.dataset.check)})},D=S=>{const N=async F=>await W(U(E,"products",F.product_id),F);S.forEach(F=>{const T=o.find(P=>P.product_id===F);T.product_isAvailable=T.product_isAvailable!==!0,N(T)})};c.exports.useEffect(()=>{p||B(null)},[p]),c.exports.useEffect(()=>{r||Le(Te(E,"products"),S=>{a([]),S.docs.forEach(N=>{a(F=>[...F,N.data()])}),t(!0)})},[]);const Y={getCheckboxes:B,mainCheckbox:C,setEditProduct:G,setShowImage:y,setEditProductBtn:h,changeAvailability:D,addToRefs:O,setDeleteProductBtn:s,setSelectedProducts:w};return d("div",{style:{paddingBottom:"200px"},children:[e(Lr,{setAddProductBtn:l,setImportProductsBtn:f,selectedProducts:k,changeAvailability:D,setDeleteProductBtn:s}),o.length>0&&e(Br,{...Y}),n&&e(Nr,{addProductBtn:n,setAddProductBtn:l}),u&&e(kr,{editProductBtn:u,setEditProductBtn:h,editProduct:R}),p&&e(Ir,{deleteProductBtn:p,setDeleteProductBtn:s,selectedProducts:k}),i&&e(_r,{importProductsBtn:i,setImportProductsBtn:f}),r===!1&&e($r,{}),o.length===0&&r===!0&&d("div",{className:"text-center mt-5 pt-5",children:[e("h3",{children:"You don't have any products yet,"}),e("h3",{className:"text-center",children:"please add some here"}),d(x,{onClick:()=>l(!0),children:[e(tt,{})," Add Product"]})]}),v&&e(Rr,{showImage:v,setShowImage:y,editProduct:R}),e(te,{toastOptions:{style:{marginTop:"60px",backgroundColor:"#c6f2ff"}}})]})};export{Vr as default};
